# API

## å±æ€§

### toolbars

- ç±»å‹ï¼š`{ addTools?: ToolbarItem[]; excludeTools?: string[]; orderTools?: { type: string; order: number }[]; }`
  - addToolsï¼šå¯ä»¥è‡ªå®šä¹‰æ–°å¢ `toolbar` é…ç½®é¡¹
  - excludeToolsï¼šéœ€è¦è¿‡æ»¤å·¥å…·é¡¹çš„ `toolbar` æ•°ç»„é…ç½®é¡¹
  - orderTools: æ’åº `toolbar` ä¸­å·¥å…·é¡¹å…ˆåé¡ºåºçš„æ•°ç»„é…ç½®é¡¹
- é»˜è®¤å€¼ï¼š`undefined`

éœ€è¦æ¸²æŸ“çš„ toolbarï¼Œé»˜è®¤å…¨éƒ¨æ¸²æŸ“ã€‚

**å·¥å…·æ é¡¹æ¥å£å®šä¹‰ï¼š**

```ts
export interface BaseToolbarItem {
  type: ToolbarType;
  icon?: string;
  title?: string;
  description?: string;
  disabled?: boolean;
  visible?: boolean;
  onClick?: () => void;
  component?: React.ReactNode;
}

export interface ToolbarItemListItem {
  title: string;
  type: string;
  hotkey?: {
    command: string;
    description: string;
    handle?: () => void;
  };
  onClick?: (...args: any[]) => void | (() => void);
}

// å®Œæ•´çš„å·¥å…·æ é¡¹æ¥å£
export interface ToolbarItem extends BaseToolbarItem {
  list?: ToolbarItemListItem[];
  hotkey?: {
    command: string;
    description: string;
    handle?: () => void;
  };
}
```

#### 1. ç§»é™¤å·¥å…·æ 

:::warning è­¦å‘Š

åªèƒ½ç§»é™¤å·²å­˜åœ¨çš„å·¥å…·æ é¡¹ï¼Œä¼ å…¥æœªè¢«è¯†åˆ«çš„å·¥å…·æ é¡¹ï¼Œä¸ä¼šç”Ÿæ•ˆã€‚

:::

```tsx
<Editor
  toolbars={{
    excludeTools: ["bold", "italic"],
  }}
/>
```

#### 2. æ–°å¢å·¥å…·æ 

> **æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰å·¥å…·æ ï¼šé…ç½®é¡¹ã€ç»„ä»¶ã€å·¥å…·æ å®ä¾‹ã€‚**

- æ–¹æ³•1ï¼šé…ç½®é¡¹

  ```tsx
  // å› ä¸º icon å±æ€§éœ€è¦çš„æ˜¯ å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯¼å…¥è·¯å¾„çš„æ—¶å€™éœ€è¦ä½¿ç”¨ `?raw`
  /**
   * å°½é‡å°† svg çš„ widthã€height è®¾ç½®ä¸º 1em
   * <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"></svg>
   */
  import CustomToolbarIcon from "@/assets/images/custom-toolbar.svg?raw";

  <Editor
    toolbars={{
      addTools: [
        {
          type: "custom-toolbar",
          title: "è‡ªå®šä¹‰toolbar",
          icon: CustomToolbarIcon, // type: string
          description: "è‡ªå®šä¹‰toolbarçš„æè¿°",
          hotkey: {
            command: "Mod-p", // å¿«æ·é”®
            description: "Mod-p", // å·¥å…·æ å¿«æ·é”®å±•ç¤ºçš„æè¿°ä¿¡æ¯
            handle: () => {
              // æ‰§è¡Œå¿«æ·é”®åçš„å›è°ƒ
              console.log("æˆ‘æ˜¯å¿«æ·é”®è¾“å‡º123");
            },
          },
          // ç‚¹å‡»å·¥å…·æ æŒ‰é’®çš„å›è°ƒ
          onClick: () => {
            console.log("æˆ‘æ˜¯å¿«æ·é”®è¾“å‡º123");
          },
        },
      ],
    }}
  />;
  ```

- æ–¹æ³•2ï¼šç»„ä»¶

  é€šè¿‡é…ç½® `component` å±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰å·¥å…·æ çš„æ ·å¼ã€‚

  > åœ¨è¯¥æ–¹å¼ä¸­ï¼Œå·¥å…·æ çš„æ ·å¼éœ€è¦å®Œå…¨è‡ªå®šä¹‰ã€‚

  ![è‡ªå®šä¹‰toolbarçš„æè¿°](./img/custom-toolbar.png)

  ```tsx
  <Editor
    toolbars={{
      addTools: [
        {
          type: "custom-toolbar",
          component: <div>ç»„ä»¶</div>,
        },
      ],
    }}
  />
  ```

- æ–¹æ³•3ï¼š å·¥å…·æ å®ä¾‹

  å¯ä»¥é€šè¿‡ `ToolbarManager` å®ä¾‹æ–¹æ³•ï¼Œå¯¹å·¥å…·æ è¿›è¡Œæ“ä½œã€‚

  æ­¤å¤„ç»™å‡ºæ·»åŠ å·¥å…·æ é¡¹çš„ç¤ºä¾‹:

  ```tsx {1,7-24}
  import { Editor, ToolbarManager, insertContent } from "mini-markdown-editor";
  import { useEffect } from "react";

  const App = () => {
    useEffect(() => {
      try {
        toolbarConfig.addToolItem({
          type: "custom-toolbar",
          title: "è‡ªå®šä¹‰å·¥å…·æ ",
          icon: CustomToolbarIcon,
          description: "è‡ªå®šä¹‰å·¥å…·æ çš„æè¿°",
          hotkey: {
            command: "Mod-l",
            description: "å¿«æ·é”®æè¿°",
            handle: () => {
              console.log("æ‰§è¡Œå¿«æ·é”®çš„å›è°ƒ");
            },
          },
          onClick: () => {
            // æ’å…¥å†…å®¹
            insertContent.insertTextAtCursor("123");
            // æ›´ç²¾ç»†æ§åˆ¶
            insertContent.insertContent("123", { anchor: 1, head: 1 });
          },
        });
        console.log("æ·»åŠ å·¥å…·æ æˆåŠŸ");
      } catch (error) {
        console.error("æ·»åŠ å·¥å…·æ å¤±è´¥:", error);
      }
    }, []);
    return (
      <>
        <Editor />
      </>
    );
  };

  export default App;
  ```

  > æƒ³è¦æ·±å…¥äº†è§£ ToolbarManager å®ä¾‹æ–¹æ³•ï¼Œå¯ä»¥ç§»æ­¥æŸ¥çœ‹: [ToolbarManager å®ä¾‹æ–¹æ³•](#toolbarmanager)ã€‚

#### 3. å·¥å…·æ æ’åº

é€šè¿‡ `orderTools` é…ç½®é¡¹ï¼Œå¯ä»¥å¯¹å·¥å…·æ ä¸­çš„å·¥å…·é¡¹è¿›è¡Œæ’åºã€‚

> åªå¯¹ `orderTools` ä¸­é…ç½®çš„å·¥å…·é¡¹è¿›è¡Œæ’åºï¼Œæœªé…ç½®çš„å·¥å…·é¡¹ä¸å—å½±å“ã€‚

```tsx
<Editor
  toolbars={{
    orderTools: [
      { type: "bold", order: 1 },
      { type: "italic", order: 2 },
      { type: "underline", order: 3 },
    ],
  }}
/>
```

### placeholder

- ç±»å‹ï¼š`string`
- é»˜è®¤å€¼ï¼š`undefined`

ç¼–è¾‘å™¨å†…å®¹ä¸ºç©ºæ—¶ï¼Œå±•ç¤ºåœ¨ç¼–è¾‘å™¨ä¸­çš„æç¤ºæ–‡å­—ã€‚

```tsx
<Editor placeholder="è¯·è¾“å…¥å†…å®¹" />
```

### value

- ç±»å‹ï¼š`string`
- é»˜è®¤å€¼ï¼š`""`

ç¼–è¾‘å™¨å†…å®¹åˆå§‹åŒ–å†…å®¹ã€‚

:::warning è­¦å‘Š

å½“ `local` ä¸º `false` æ—¶ï¼Œ`value` æ‰ä¼šèµ·ä½œç”¨ã€‚ä¸ç„¶ä¼šé»˜è®¤ä½¿ç”¨ `localStorage` ä¸­çš„å†…å®¹ã€‚

:::

```tsx
<Editor value="# Hello World" local={false} />
```

### local

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼š`true`

æ˜¯å¦å¼€å¯æœ¬åœ°å­˜å‚¨ï¼Œé»˜è®¤å¼€å¯ã€‚

> `localStorage` å­˜å‚¨çš„ key ä¸º `markdown-editor-content`

```tsx
<Editor local={false} />
```

### status

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼š`true`

åº•éƒ¨çŠ¶æ€æ æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¾ç¤ºã€‚

```tsx
<Editor status={false} />
```

### theme

- ç±»å‹ï¼š`"light" | "dark"`
- é»˜è®¤å€¼ï¼š`"light"`

ç¼–è¾‘å™¨ä¸»é¢˜ã€‚

```tsx
const App = () => {
  const [theme, setTheme] = useState<"light" | "dark">("light");
  const handleChange = () => {
    setTheme(theme === "light" ? "dark" : "light");
  };
  return (
    <>
      <button onClick={handleChange}>åˆ‡æ¢ä¸»é¢˜</button>
      <Editor theme={theme} />
    </>
  );
};
```

### locale

- ç±»å‹ï¼š`"en" | "cn" | "tw"`
- é»˜è®¤å€¼ï¼š`"en"`

è¯­è¨€ç¯å¢ƒã€‚

```tsx
<Editor locale="cn" />
```

### lineNumbers

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼š`false`

ç¼–è¾‘åŒºæ˜¯å¦æ˜¾ç¤ºè¡Œå·ï¼Œé»˜è®¤ä¸æ˜¾ç¤ºã€‚

```tsx
<Editor lineNumbers={true} />
```

### enableShortcuts

- ç±»å‹ï¼š`boolean`
- é»˜è®¤å€¼ï¼š`true`

æ˜¯å¦å¼€å¯å¿«æ·é”®æ”¯æŒï¼Œé»˜è®¤å¼€å¯ã€‚

```tsx
<Editor enableShortcuts={true} />
```

### styleã€classNameã€idç­‰å…¶ä»–å±æ€§

ä¸º**ç¼–è¾‘åŒº**æ·»åŠ æ ·å¼ã€ç±»åã€id...ï¼Œå¯ä»¥ä½¿ç”¨ `CodeMirror` çš„å±æ€§ã€‚

> `style`ã€`className`ã€`id` ç­‰å±æ€§ï¼Œæ˜¯ç»§æ‰¿çš„ `CodeMirror` å±æ€§ï¼Œæ‰€ä»¥é…ç½®çš„æ˜¯**ç¼–è¾‘åŒº**ã€‚
>
> - classNameï¼šé»˜è®¤ä¸º `markdown-editor-content`

## äº‹ä»¶

### onChange

- ç±»å‹ï¼š`(value: string, editorView: ViewUpdate) => void`
  - valueï¼šç¼–è¾‘å™¨å†…å®¹
  - editorViewï¼šç¼–è¾‘å™¨å®ä¾‹

ç¼–è¾‘å™¨å†…å®¹å˜åŒ–æ—¶è§¦å‘ã€‚

```tsx
<Editor
  onChange={(value, editorView) => {
    console.log(value, editorView);
  }}
/>
```

### onSave

- ç±»å‹ï¼š`(value: string, editorView: EditorView) => void`

ä¿å­˜äº‹ä»¶ï¼Œå½“ç‚¹å‡» `ä¿å­˜æŒ‰é’®` / `æŒ‰ä¸‹å¿«æ·é”®` æ—¶è§¦å‘ã€‚

```tsx
<Editor
  onSave={(value, editorView) => {
    // ä¸Šä¼ æœåŠ¡å™¨
    console.log(value, editorView);
  }}
/>
```

### onUpload

- ç±»å‹ï¼š`(file: File, callback: Callback) => void`
  - fileï¼š`File` å¯¹è±¡
  - callbackï¼š`Callback`

```ts
type Callback = (param: { url: string; alt?: string }) => void;
```

ä¸Šä¼ å›¾ç‰‡äº‹ä»¶ï¼Œç­‰å¾…ä¸Šä¼ ç»“æœï¼ŒåŠ¡å¿…å°†ä¸Šä¼ åçš„ url ä½œä¸º callback å…¥å‚å›ä¼ ã€‚

```tsx {5,12-15,19}
import { message } from "antd";

const App: FC = () => {
  // è¯·æ±‚æµ‹è¯•
  const handleUpload = async (file: File, callback: Callback) => {
    await new Promise((resolve) => {
      setTimeout(() => {
        resolve({});
      }, 1500);
    });
    callback({
      url: "https://www.baidu.com/img/flexible/logo/pc/result@2.png",
      alt: "alt",
    });
    message.success("ä¸Šä¼ æˆåŠŸ");
  };

  return <EditorWrapper onUpload={handleUpload} />;
};
```

### onDragUpload

- ç±»å‹ï¼š`(file: File, callback: Callback) => void`
  - fileï¼š`File` å¯¹è±¡
  - callbackï¼š`Callback`

```ts
type Callback = (param: { url: string; alt?: string }) => void;
```

æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡æ—¶è§¦å‘ï¼ŒåŠ¡å¿…å°†ä¸Šä¼ åçš„ url ä½œä¸º callback å…¥å‚å›ä¼ ã€‚

> callbackçš„altæ˜¯å¯é€‰é¡¹ï¼Œå¦‚æœæ²¡ä¼ çš„è¯å°±æ˜¯nanoidç”Ÿæˆçš„8ä½éšæœºæ•°å­—è‹±æ–‡ã€‚

### onPatseUpload

ç²˜è´´ä¸Šä¼ å›¾ç‰‡æ—¶è§¦å‘ï¼ŒåŒ `onDragUpload` äº‹ä»¶ã€‚

## ref

ç¼–è¾‘å™¨å®ä¾‹æ–¹æ³•ã€‚

> å…·ä½“ç±»å‹ï¼Œå‚è€ƒ [EditorRef](./api#editorref)

```tsx
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <Editor ref={editorRef} />
    </>
  );
}
```

### getContent

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`string`

è·å–ç¼–è¾‘å™¨å†…å®¹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          const text = editorRef.current?.getContent();
          console.log(text);
        }}
      >
        è·å–å†…å®¹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### setContent

- å‚æ•°ï¼š`content: string`
- è¿”å›å€¼ï¼š`void`

è®¾ç½®ç¼–è¾‘å™¨å†…å®¹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          editorRef.current?.setContent("hello world");
        }}
      >
        è®¾ç½®å†…å®¹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### clear

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`void`

æ¸…ç©ºç¼–è¾‘å™¨å†…å®¹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          editorRef.current?.clear();
          console.log(editorRef.current?.getContent());
        }}
      >
        æ¸…ç©ºå†…å®¹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### setCursor

- å‚æ•°ï¼š`start: number, end: number`
- è¿”å›å€¼ï¼š`void`

è®¾ç½®å…‰æ ‡ä½ç½®ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          editorRef.current?.setCursor(100, 100);
        }}
      >
        è®¾ç½®å…‰æ ‡ä½ç½®ï¼ˆ100ï¼Œ100ï¼‰
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### getCursor

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`{ from: number, to: number }`

è·å–å…‰æ ‡ä½ç½®ï¼Œè¿”å›å¼€å§‹å’Œç»“æŸä½ç½®ï¼ˆå¦‚æœ `from` === `to`ï¼Œåˆ™è¡¨ç¤ºæœªé€‰ä¸­å†…å®¹ï¼‰ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          const position = editorRef.current?.getCursor();
          console.log(position);
        }}
      >
        è·å–å…‰æ ‡ä½ç½®
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### getSelection

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`string`

è·å–é€‰ä¸­å†…å®¹ï¼Œè¿”å›é€‰ä¸­çš„å†…å®¹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          const text = editorRef.current?.getSelection();
          console.log(text);
        }}
      >
        è·å–é€‰ä¸­å†…å®¹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### focus

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`void`

è®¾ç½®ç¼–è¾‘å™¨èšç„¦ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          editorRef.current?.focus();
        }}
      >
        èšç„¦
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### getEditorInstance

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`EditorView | null`

è·å– **`ç¼–è¾‘åŒº(CodeMirror)`** å®ä¾‹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          const instance = editorRef.current?.getEditorInstance();
          console.log(instance);
        }}
      >
        è·å–ç¼–è¾‘å™¨å®ä¾‹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

### getPreviewInstance

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`HTMLElement | null`

è·å– **`é¢„è§ˆåŒº`** å®ä¾‹ã€‚

```tsx {10}
import { Editor, type EditorRef } from "mini-markdown-editor";
import { useRef } from "react";

export default function () {
  const editorRef = useRef<EditorRef>(null);
  return (
    <>
      <button
        onClick={() => {
          const instance = editorRef.current?.getPreviewInstance();
          console.log(instance);
        }}
      >
        è·å–é¢„è§ˆåŒºå®ä¾‹
      </button>
      <Editor ref={editorRef} />
    </>
  );
}
```

## å®ä¾‹æ–¹æ³•

### ToolbarManager

å·¥å…·æ ç®¡ç†å™¨æ–¹æ³•ï¼Œç”¨äºè‡ªå®šä¹‰å·¥å…·æ ã€‚

:::tip æ³¨æ„

éœ€è¦æ¸²æŸ“ `<Editor />` ç»„ä»¶åï¼Œæ‰èƒ½ä½¿ç”¨ `ToolbarManager`ã€‚

:::

```ts
import { ToolbarManager } from "mini-markdown-editor";
```

> å¯ä»¥ä½¿ç”¨ `try...catch`åŒ…è£¹ `ToolbarManager`ï¼Œæ•è·é”™è¯¯ã€‚

#### 1. getDefaultToolbar

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`ToolbarItem[]`

è·å–é»˜è®¤å·¥å…·æ å†…å®¹ã€‚

> è·å–çš„ toolbar å†…å®¹é»˜è®¤çš„å†…å®¹ï¼Œå³ä½¿ `toolbar.excludeTools` æ’é™¤åï¼Œè¿˜æ˜¯ä¼šè·å–ã€‚

```tsx {1,5}
import { Editor, ToolbarManager } from "mini-markdown-editor";

export default function () {
  useEffect(() => {
    const res = ToolbarManager.getDefaultToolbar();
    console.log(res);
  }, []);
  return (
    <>
      <Editor />
    </>
  );
}
```

#### 2. getAllToolbars

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`ToolbarItem[]`

è·å–æ‰€æœ‰å·¥å…·æ é¡¹ã€‚

```tsx
useEffect(() => {
  const res = ToolbarManager.getAllToolbars();
}, []);
```

#### 3. addToolItem

- å‚æ•°ï¼š`item: ToolbarItem`
- è¿”å›å€¼ï¼š`void`

æ·»åŠ æŒ‡å®šå·¥å…·æ é¡¹ã€‚

```tsx {1,5-12}
import { Editor, ToolbarManager } from "mini-markdown-editor";

export default function () {
  useEffect(() => {
    ToolbarManager.addToolItem({
      type: "heading",
      icon: "heading",
      title: "æ ‡é¢˜",
      onClick: () => {
        console.log("æ ‡é¢˜");
      },
    });
  }, []);
  return (
    <>
      <Editor />
    </>
  );
```

#### 4. updateToolbars

- å‚æ•°ï¼š`newToolbars: ToolbarItem[]`
- è¿”å›å€¼ï¼š`void`

æ›´æ–°å·¥å…·æ å†…å®¹ã€‚

```tsx
useEffect(() => {
  ToolbarManager.updateToolbars([
    {
      type: "heading",
      icon: "heading",
      title: "æ ‡é¢˜",
      onClick: () => {
        console.log("æ ‡é¢˜");
      },
    },
  ]);
}, []);
```

> æ³¨æ„ï¼šä¸Šé¢å†™æ³•ğŸ‘†ï¼Œä¼šè¦†ç›–å·¥å…·æ é…ç½®ï¼Œæœ€ååªå‰©ä¸€ä¸ª `heading` å·¥å…·æ ã€‚

#### 5. updateToolbarItem

- å‚æ•°ï¼š`type: ToolbarType, partialToolbarItem: Partial<ToolbarItem>`
- è¿”å›å€¼ï¼š`void`

ä¿®æ”¹ç‰¹å®šå·¥å…·æ é¡¹çš„åŠŸèƒ½ã€‚

```tsx
useEffect(() => {
  ToolbarManager.updateToolbarItem("bold", {
    onClick: () => {
      console.log("æˆ‘æ˜¯ç²—ä½“");
    },
    hotkey: {
      command: "Mod-b",
      description: "å¿«æ·é”®æè¿°",
      handle: () => {
        console.log("æˆ‘æ˜¯å¿«æ·é”®ç²—ä½“");
      },
    },
  });
}, []);
```

#### 6. removeToolItem

- å‚æ•°ï¼š`type: ToolbarType`
- è¿”å›å€¼ï¼š`void`

ç§»é™¤æŒ‡å®šå·¥å…·æ é¡¹ã€‚

```tsx
useEffect(() => {
  ToolbarManager.removeToolItem("bold");
}, []);
```

#### 7. reset

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`void`

é‡ç½®å·¥å…·æ ã€‚

```tsx
ToolbarManager.reset();
```

#### 8. reorderToolbar

- å‚æ•°ï¼š`newOrder: ToolbarType[]`
- è¿”å›å€¼ï¼š`void`

é‡æ–°æ’åºå·¥å…·æ ã€‚

```tsx
useEffect(() => {
  ToolbarManager.reorderToolbar(["heading", "line", "table", "undo", "redo", "fullscreen"]);
}, []);
```

### insertContent

å¯¹ `Editor` çš„ç¼–è¾‘åŒºè¿›è¡Œæ“ä½œçš„æ–¹æ³•ï¼Œå¯ç»“åˆ `è‡ªå®šä¹‰toolbar` ä½¿ç”¨ï¼Œå®ç°å®Œæ•´åŠŸèƒ½ã€‚

:::tip æ³¨æ„

éœ€è¦æ¸²æŸ“ `<Editor />` ç»„ä»¶åï¼Œæ‰èƒ½ä½¿ç”¨ `insertContent`ã€‚

:::

```ts
import { insertContent } from "mini-markdown-editor";
```

#### 1. insertContent

- å‚æ•°ï¼š`content: string, selection: { anchor: number; head: number }`
- è¿”å›å€¼ï¼š`void`

åœ¨ç¼–è¾‘åŒºæ’å…¥å†…å®¹ï¼ˆç›¸æ¯” `insertTextAtCursor` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ§åˆ¶æ›´åŠ ç²¾ç»†ï¼‰ã€‚

:::info selectionå‚æ•°

`anchorã€head`ï¼šç”¨äºæ§åˆ¶å…‰æ ‡ä½ç½®ï¼Œå½“ `anchor` å’Œ `head` ç›¸ç­‰æ—¶ï¼Œè¡¨ç¤ºå…‰æ ‡åœ¨å½“å‰ä½ç½®ï¼Œå¦‚æœ `anchor` å’Œ `head` ä¸ç›¸ç­‰ï¼Œåˆ™è¡¨ç¤ºå…‰æ ‡é€‰ä¸­æŸæ®µå†…å®¹ã€‚

:::

```tsx
import { Editor, insertContent } from "mini-markdown-editor";
export default function () {
  return (
    <>
      <button
        onClick={() => {
          insertContent.insertContent("hello world", { anchor: 1, head: 1 });
        }}
      >
        æ’å…¥å†…å®¹
      </button>
      <Editor />
    </>
  );
}
```

#### 2. insertTextAtCursor

- å‚æ•°ï¼š`content: string`
- è¿”å›å€¼ï¼š`void`

åœ¨ç¼–è¾‘åŒºæ’å…¥æ–‡æœ¬ã€‚

```tsx
import { insertContent } from "mini-markdown-editor";

<button
  onClick={() => {
    insertContent.insertTextAtCursor("hello world");
  }}
>
  æ’å…¥æ–‡æœ¬
</button>;
```

#### 3. undoã€redo

- å‚æ•°ï¼š`void`
- è¿”å›å€¼ï¼š`void`

æ’¤é”€ã€é‡åšã€‚

```tsx
import { insertContent } from "mini-markdown-editor";

<button
  onClick={() => {
    insertContent.undo();
  }}
>
  æ’¤é”€
</button>;
<button
  onClick={() => {
    insertContent.redo();
  }}
>
  é‡åš
</button>;
```

## å¸¸é‡

### EDITOR_CONTENT_KEY

ç¼–è¾‘åŒºå†…å®¹å­˜å‚¨(localStorage)çš„ `key`ï¼Œå€¼ä¸º `markdown-editor-content`ã€‚

### SYNC_SCROLL_STATUS

åŒæ­¥æ»šåŠ¨çŠ¶æ€(å­˜å‚¨åœ¨localStorageä¸­)ï¼Œå€¼ä¸º `markdown-editor-sync-scroll`ã€‚

## ç±»å‹

### EditorViewã€ViewUpdate

ç¼–è¾‘åŒºä½¿ç”¨çš„æ˜¯ `CodeMirror`ï¼Œå¯¹å¤–æš´éœ²äº† `EditorView` å’Œ `ViewUpdate` ä¸¤ä¸ªç±»å‹ï¼Œå¯ä¾›ä½¿ç”¨ã€‚

```ts
import type { EditorView, ViewUpdate } from "mini-markdown-editor";
```

### ToolbarType

å·¥å…·æ ç±»å‹ï¼Œç”¨äºé…ç½® `toolbar`ã€‚

```ts
// åŸºç¡€å·¥å…·æ ç±»å‹
enum BaseToolbarType {
  HEADING = "heading",
  HEADING_1 = "heading-1",
  HEADING_2 = "heading-2",
  HEADING_3 = "heading-3",
  HEADING_4 = "heading-4",
  HEADING_5 = "heading-5",
  HEADING_6 = "heading-6",
  BOLD = "bold",
  ITALIC = "italic",
  UNDERLINE = "underline",
  DELETE = "delete",
  LINE = "line",
  BLOCKQUOTE = "blockquote",
  UL = "ul",
  OL = "ol",
  INLINECODE = "inlinecode",
  CODE = "code",
  LINK = "link",
  IMAGE = "image",
  IMAGE_LINK = "image-link",
  IMAGE_UPLOAD = "image-upload",
  TABLE = "table",
  UNDO = "undo",
  REDO = "redo",
  FULLSCREEN = "fullscreen",
  WRITE = "write",
  PREVIEW = "preview",
  CONTENTS = "contents",
  HELP = "help",
  OUTPUT = "output",
  EMOJI = "emoji",
  SAVE = "save",
}

// å…è®¸ç”¨æˆ·æ‰©å±•çš„å·¥å…·æ ç±»å‹
type ExtendedToolbarType = string;

// åˆå¹¶åŸºç¡€ç±»å‹å’Œæ‰©å±•ç±»å‹
type ToolbarType = BaseToolbarType | ExtendedToolbarType;
```

**ä½¿ç”¨ï¼š**

```ts
import type { ToolbarType } from "mini-markdown-editor";
```

### ToolbarItem

å·¥å…·æ æ¯ä¸€é¡¹ç±»å‹ã€‚

```ts
// å·¥å…·æ åˆ—è¡¨é¡¹æ¥å£
interface ToolbarItemListItem {
  title: string;
  type: string;
  hotkey?: {
    command: string;
    description: string;
    handle?: () => void;
  };
  onClick?: (...args: any[]) => void | (() => void);
}

// å®Œæ•´çš„å·¥å…·æ é¡¹æ¥å£
interface ToolbarItem extends BaseToolbarItem {
  list?: ToolbarItemListItem[];
  hotkey?: {
    command: string;
    description: string;
    handle?: () => void;
  };
}
```

### ToolbarContextValues

å·¥å…·æ ä¸Šä¸‹æ–‡å€¼æ¥å£ï¼Œå¯ä»¥å¯¹å·¥å…·æ è¿›è¡Œâ€œå¢åˆ æ”¹æŸ¥â€ã€‚

```ts
interface ToolbarContextValues {
  toolbars: ToolbarItem[];
  addToolbar?: (toolbarItem: ToolbarItem) => void;
  removeToolbar?: (type: ToolbarType) => void;
  updateToolbar?: (type: ToolbarType, newConfig: Partial<ToolbarItem>) => void;
  reorderToolbars?: (newOrder: ToolbarType[]) => void;
}
```

### GlobalConfig

å…¨å±€é…ç½®ç±»å‹ã€‚

> `ReactCodeMirrorProps` æ¥è‡ª `@uiw/react-codemirror`ã€‚
>
> å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ `CodeMirrorProps` ä¸­çš„é…ç½®ã€‚

```ts
interface GlobalConfig extends ReactCodeMirrorProps {
  /**
   * ç¼–è¾‘å™¨åˆå§‹å†…å®¹
   */
  value?: string;
  /**
   * é…ç½®å·¥å…·æ 
   * æ·»åŠ å·¥å…·; æ’é™¤å·¥å…·; æ’åºå·¥å…·
   */
  toolbars?: {
    addTools?: ToolbarItem[];
    excludeTools?: string[];
    orderTools?: { type: string; order: number }[];
  };
  /**
   * åº•éƒ¨çŠ¶æ€æ æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¾ç¤º
   */
  status?: boolean;
    /**
   * è¯­è¨€ç¯å¢ƒ
   */
  locale?: "en" | "cn" | "tw";
  /**
   * ç¼–è¾‘å™¨ä¸»é¢˜
   */
  theme?: "light" | "dark";
  /**
   * æ˜¯å¦å¼€å¯æœ¬åœ°å­˜å‚¨
   */
  local?: boolean; // æ˜¯å¦å¼€å¯æœ¬åœ°å­˜å‚¨
  /**
   * ç¼–è¾‘åŒºæ˜¯å¦æ˜¾ç¤ºè¡Œå·
   */
  lineNumbers?: boolean;
  /**
   * æ˜¯å¦å¼€å¯å¿«æ·é”®æ”¯æŒ
   */
  enableShortcuts?: boolean;
  /**
   * æ”¹å˜ç¼–è¾‘å™¨å†…å®¹æ—¶è§¦å‘
   */
  onChange?: (value: string, editorView: ViewUpdate) => void;
  /**
   * ä¸Šä¼ å›¾ç‰‡æ—¶è§¦å‘
   */
  onUpload?: (file: File, callback: Callback) => void;
  /**
   * æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡æ—¶è§¦å‘
   */
  onDragUpload?: (file: File, callback: Callback) => void;
  /**
   * ç²˜è´´ä¸Šä¼ å›¾ç‰‡æ—¶è§¦å‘
   */
  onPatseUpload?: (file: File, callback: Callback) => void;
  /**
   * ä¿å­˜è§¦å‘
   */
  onSave?: (value: string, editorView: EditorView) => void;
}

type Callback = (param: { url: string; alt?: string }) => void;
```

å…¶ä»–ç±»å‹

```ts
type GlobalContextConfig = Pick<
  GlobalConfig,
  | "theme"
  | "value"
  | "toolbars"
  | "status"
  | "local"
  | "lineNumbers"
  | "enableShortcuts"
  | "onUpload"
  | "onDragUpload"
  | "onPatseUpload"
  | "onSave"
  | "onChange"
>;
type EditorConfig = Omit<GlobalConfig, keyof GlobalContextConfig>;
```

### EditorRef

```ts
interface EditorRef {
  /**
   * è·å–ç¼–è¾‘å™¨å†…å®¹
   */
  getContent: () => string;
  /**
   * è®¾ç½®ç¼–è¾‘å™¨å†…å®¹
   */
  setContent: (content: string) => void;
  /**
   * æ¸…ç©ºç¼–è¾‘å™¨å†…å®¹
   */
  clear: () => void;
  /**
   * è®¾ç½®å…‰æ ‡ä½ç½®
   */
  setCursor: (start: number, end: number) => void;
  /**
   * è·å–å…‰æ ‡ä½ç½®
   */
  getCursor: () => { from: number; to: number };
  /**
   * è·å–é€‰ä¸­å†…å®¹
   */
  getSelection: () => string;
  /**
   * èšç„¦
   */
  focus: () => void;
  /**
   * è·å–ç¼–è¾‘å™¨å®ä¾‹
   */
  getEditorInstance: () => EditorView | null;
  /**
   * è·å–é¢„è§ˆåŒºå®ä¾‹
   */
  getPreviewInstance: () => HTMLElement | null;
}
```
